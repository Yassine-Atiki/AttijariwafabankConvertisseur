<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Convertisseur pain.001 → MT101 — Attijariwafa bank</title>
    <link rel="stylesheet" href="/css/dashboard.css" />
</head>
<body>
<div class="app-shell">
    <aside class="sidebar" role="navigation" aria-label="Menu principal">
        <div class="sidebar-header">
            <img class="sidebar-logo" src="/images/attijari_logo.png" alt="Logo Attijariwafa bank" />
            <div class="brand-text">
                <span class="bank">Attijariwafa bank</span>
            </div>
        </div>
        <nav class="sidebar-nav">
            <a class="nav-item active" href="#" data-target="view-home">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 10.5L12 3l9 7.5"/><path d="M6 10v10h12V10"/></svg>
            </span>
                <span class="label">Home</span>
            </a>
            <a class="nav-item" href="#" data-target="view-convert">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h12"/><path d="M12 3l4 3-4 3"/><path d="M20 18H8"/><path d="M12 15l-4 3 4 3"/></svg>
            </span>
                <span class="label">pain.001 → MT101</span>
            </a>
            <a class="nav-item" href="#" data-target="view-transform">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v3M12 19v3M4 12h3M17 12h3M5 5l2 2M17 17l2 2M19 5l-2 2M7 17l-2 2"/></svg>
            </span>
                <span class="label">Transformation</span>
            </a>
            <a class="nav-item" href="#" data-target="view-reports">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 4l8 14H4l8-14z"/><path d="M12 10v4"/><circle cx="12" cy="17" r="1"/></svg>
            </span>
                <span class="label">Rapports Erreurs</span>
            </a>
        </nav>
    </aside>

    <div class="content">
        <section id="view-home" class="view is-visible welcome" aria-label="Accueil">
            <div class="home-grid">
                <div class="home-main">
                    <div class="panel">
                        <div class="welcome-row">
                            <div>
                                <strong>Bienvenue</strong>
                                <div class="muted">yassineatiki@attijariwafa.com</div>
                            </div>
                            <button class="btn btn-primary" type="button" data-target="view-convert">Nouvelle transformation</button>
                        </div>
                    </div>

                    <div class="metrics">
                        <div class="metric-cards">
                            <div class="metric-card">
                                <div class="ring total" style="--v:.94"><div class="center">Σ</div></div>
                                <div>
                                    <div class="metric-title">Total Messages</div>
                                    <div class="metric-value">47</div>
                                </div>
                            </div>
                            <div class="metric-card">
                                <div class="ring success" style="--v:.96"><div class="center">✓</div></div>
                                <div>
                                    <div class="metric-title">Success Messages</div>
                                    <div class="metric-value">45</div>
                                </div>
                            </div>
                            <div class="metric-card">
                                <div class="ring error" style="--v:.04"><div class="center">!</div></div>
                                <div>
                                    <div class="metric-title">Error Messages</div>
                                    <div class="metric-value">2</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chart">
                        <div class="panel">
                            <svg viewBox="0 0 600 240" role="img" aria-label="Évolution des messages">
                                <g class="axis">
                                    <line x1="40" y1="200" x2="580" y2="200" stroke="#e5e7eb" />
                                    <line x1="40" y1="200" x2="40" y2="24" stroke="#e5e7eb" />
                                    <text x="60" y="220">2024-08-13</text>
                                    <text x="260" y="220">2024-08-15</text>
                                    <text x="460" y="220">2024-08-16</text>
                                </g>
                                <path class="area" d="M40,200 L80,160 L240,110 L420,60 L580,48 L580,200 Z" />
                                <path class="line" d="M40,200 L80,160 L240,110 L420,60 L580,48" />
                                <circle class="point" cx="80" cy="160" r="4" />
                                <circle class="point" cx="240" cy="110" r="4" />
                                <circle class="point" cx="420" cy="60" r="4" />
                                <circle class="point" cx="580" cy="48" r="4" />
                            </svg>
                        </div>
                    </div>

                </div>

                <aside class="calendar">
                    <div class="panel">
                        <div class="cal-head">
                            <button class="btn btn-ghost" aria-label="Mois précédent">◀</button>
                            <div class="month">August 2024</div>
                            <button class="btn btn-ghost" aria-label="Mois suivant">▶</button>
                        </div>
                        <div class="cal-grid">
                            <div class="dow">Mo</div><div class="dow">Tu</div><div class="dow">We</div><div class="dow">Th</div><div class="dow">Fr</div><div class="dow">Sa</div><div class="dow">Su</div>
                            <div class="cal-day is-muted">29</div><div class="cal-day is-muted">30</div><div class="cal-day is-muted">31</div>
                            <div class="cal-day">1</div><div class="cal-day">2</div><div class="cal-day">3</div><div class="cal-day">4</div>
                            <div class="cal-day">5</div><div class="cal-day">6</div><div class="cal-day">7</div><div class="cal-day">8</div><div class="cal-day">9</div><div class="cal-day">10</div><div class="cal-day">11</div>
                            <div class="cal-day">12</div><div class="cal-day">13</div><div class="cal-day">14</div><div class="cal-day">15</div><div class="cal-day is-today">16</div><div class="cal-day">17</div><div class="cal-day">18</div>
                            <div class="cal-day">19</div><div class="cal-day">20</div><div class="cal-day">21</div><div class="cal-day">22</div><div class="cal-day">23</div><div class="cal-day">24</div><div class="cal-day">25</div>
                            <div class="cal-day">26</div><div class="cal-day">27</div><div class="cal-day">28</div><div class="cal-day">29</div><div class="cal-day">30</div><div class="cal-day">31</div><div class="cal-day is-muted">1</div>
                        </div>
                    </div>
                </aside>
            </div>
        </section>

        <section id="view-convert" class="view" aria-label="Conversion pain.001 vers MT101">
            <div class="container">
                <section class="panel options" aria-labelledby="options-title">
                    <h2 id="options-title">Paramètres — pain.001 → MT101</h2>
                    <div class="options-grid">
                        <label class="field">
                            <span>Type MX source</span>
                            <select disabled>
                                <option selected>pain.001 (ISO 20022)</option>
                            </select>
                        </label>
                        <label class="field">
                            <span>Type MT cible</span>
                            <select disabled>
                                <option selected>MT101 (SWIFT FIN)</option>
                            </select>
                        </label>

                        <div class="toggles">
                            <label class="toggle"><input type="checkbox" checked /> Valider le schéma pain.001</label>
                            <label class="toggle"><input type="checkbox" /> Normaliser accents</label>
                            <label class="toggle"><input type="checkbox" /> Masquer données sensibles</label>
                        </div>
                        <div class="actions">
                            <button class="btn btn-primary" type="button">Convertir</button>
                            <button class="btn btn-secondary" type="button">Vider</button>
                        </div>
                    </div>
                </section>

                <section class="grid io" aria-label="Saisie et sortie">
                    <div class="panel input" aria-labelledby="mx-title" style="margin-top: 16px;">
                        <div class="panel-header">
                            <h2 id="mx-title">Entrée pain.001 (ISO 20022 XML)</h2>
                            <div class="panel-actions">
                                <label class="btn btn-outline file-label">
                                    Importer XML
                                    <input type="file" accept=".xml,.zip" aria-label="Importer fichier pain.001" />
                                </label>
                            </div>
                        </div>
                        <div class="dropzone" role="group" aria-label="Zone de dépôt">
                            <p>Glissez-déposez un fichier pain.001 ici, ou collez votre contenu XML ci-dessous.</p>
                        </div>
                        <label class="sr-only" for="mx-input">pain.001 XML</label>
                        <textarea id="mx-input" placeholder="&lt;Document xmlns=&quot;urn:iso:std:iso:20022:tech:xsd:pain.001.001.03&quot;&gt;
  &lt;CstmrCdtTrfInitn&gt;
    &lt;GrpHdr&gt;...&lt;/GrpHdr&gt;
    &lt;PmtInf&gt;...&lt;/PmtInf&gt;
  &lt;/CstmrCdtTrfInitn&gt;
&lt;/Document&gt;"></textarea>
                    </div>

                    <div class="panel output" aria-labelledby="mt-title">
                        <div class="panel-header">
                            <h2 id="mt-title">Sortie MT101 (SWIFT FIN)</h2>
                            <div class="panel-actions">
                                <button class="btn btn-outline" type="button">Copier</button>
                                <button class="btn btn-outline" type="button">Télécharger .mt</button>
                            </div>
                        </div>
                        <label class="sr-only" for="mt-output">MT101</label>
                        <textarea id="mt-output" placeholder=":20:REFERENCE
:28D:1/1
:21R:RELATED-REF
:30:YYMMDD
:50H:/DEBTOR-ACCOUNT
DEBTOR NAME & ADDRESS
:59:/CREDITOR-ACCOUNT
CREDITOR NAME & ADDRESS
:70:REMI SEPA/INFO
:71A:OUR
-" readonly></textarea>
                    </div>
                </section>

                <section class="panel validation" aria-labelledby="validation-title" style="margin-top: 15px;">
                    <h2 id="validation-title">Résultats de validation</h2>
                    <ul class="status-list" aria-live="polite">
                        <li class="status ok">Schéma pain.001 valide</li>
                        <li class="status info">Champs mappés pour MT101 (profil AWB par défaut)</li>
                    </ul>
                </section>

                <section class="panel history" aria-labelledby="history-title">
                    <h2 id="history-title">Historique récent</h2>
                    <div class="table-wrap">
                        <table>
                            <thead>
                            <tr>
                                <th>Date</th>
                                <th>Fichier</th>
                                <th>Type cible</th>
                                <th>Statut</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>12/08/2025 10:24</td>
                                <td>pain.001.xml</td>
                                <td>MT101</td>
                                <td><span class="chip ok">Converti</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </section>

        <section id="view-transform" class="view" aria-label="Transformation">
            <div class="container">
                <div class="panel">
                    <p class="muted">Espace Transformation — à compléter.</p>
                </div>
            </div>
        </section>

        <section id="view-reports" class="view" aria-label="Rapports d'erreurs">
            <div class="container">
                <div class="panel">
                    <p class="muted">Rapports d'erreurs — à compléter.</p>
                </div>
            </div>
        </section>

        <footer class="app-footer" role="contentinfo">
            <p>&copy; 2025 Attijariwafa bank — Tous droits réservés.</p>
        </footer>
    </div>
</div>

<script>
    (function () {
        const navItems = document.querySelectorAll('.sidebar-nav .nav-item');
        const views = document.querySelectorAll('.view');
        const triggers = document.querySelectorAll('[data-target]');

        function showView(id) {
            views.forEach((v) => v.classList.remove('is-visible'));
            const target = document.getElementById(id);
            if (target) target.classList.add('is-visible');
            // sync active state in sidebar
            navItems.forEach((i) => i.classList.toggle('active', i.getAttribute('data-target') === id));
        }

        // Wire all triggers (sidebar items + buttons)
        triggers.forEach((el) => {
            el.addEventListener('click', (e) => {
                const id = el.getAttribute('data-target');
                if (!id) return;
                e.preventDefault();
                showView(id);
            });
        });
    })();
</script>
</body>
</html>
